# Configuración de almacenamiento (Almacenamiento persistente)
storage "file" {
  path = "/etc/vault.d/data"
}

# Configuración del servidor
listener "tcp" {
  address = "0.0.0.0:8200"
  tls_disable = 1
}

api_addr = "http://127.0.0.1:8200"

# Para ver el front de vault ("=false" lo capa en producción)
ui = true

# mlock es una función del sistema que bloquea la memoria para evitar que se guarde en swap
# Se deshabilita en contenedores porque:
# - Los contenedores tienen memoria limitada
# - Docker ya maneja la seguridad de memoria
# - Requiere privilegios especiales que no queremos dar
disable_mlock = true

# Telemetría (desactivada para no enviar datos a HashiCorp, puede reemplazarse por Prometheus)
telemetry {
  disable_hostname = true
  prometheus_retention_time = "24h"
}

# TTL = time to live de los secretos..
# ... por defecto
default_lease_ttl = "24h"

# ... tiempo máximo
max_lease_ttl = "48h"